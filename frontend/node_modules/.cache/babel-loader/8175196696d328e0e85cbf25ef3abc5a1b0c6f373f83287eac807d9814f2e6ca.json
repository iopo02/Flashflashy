{"ast":null,"code":"import \"core-js/modules/esnext.json.parse.js\";\nimport axios from 'axios';\nexport default {\n  name: 'AdminPanel',\n  data() {\n    return {\n      userIdInput: '',\n      currentUserId: null,\n      users: [],\n      loading: false,\n      editingUserId: null,\n      editUsernameValue: '',\n      userToDelete: null,\n      successMessage: '',\n      errorMessage: '',\n      authError: ''\n    };\n  },\n  mounted() {\n    // First try to use logged-in user if they're admin\n    if (!this.checkLoggedInUser()) {\n      // Fallback to adminUserId if available (for backward compatibility)\n      const storedUserId = localStorage.getItem('adminUserId');\n      if (storedUserId) {\n        this.currentUserId = storedUserId;\n        this.fetchUsers();\n      }\n    }\n  },\n  methods: {\n    async authenticate() {\n      if (!this.userIdInput.trim()) {\n        this.authError = 'Please enter a user ID';\n        return;\n      }\n      try {\n        // Try to fetch users to verify admin status\n        await axios.get('/admin/users', {\n          params: {\n            userId: this.userIdInput.trim()\n          }\n        });\n        this.currentUserId = this.userIdInput.trim();\n        localStorage.setItem('adminUserId', this.currentUserId);\n        this.authError = '';\n        this.fetchUsers();\n      } catch (error) {\n        if (error.response?.status === 403) {\n          this.authError = 'Access denied. You must be an admin.';\n        } else if (error.response?.status === 404) {\n          this.authError = 'User not found.';\n        } else {\n          this.authError = 'Error authenticating. Please check your user ID.';\n        }\n      }\n    },\n    checkLoggedInUser() {\n      // Check if user is logged in and is admin\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        try {\n          const user = JSON.parse(userStr);\n          if (user.isAdmin && user.id) {\n            this.currentUserId = user.id;\n            this.fetchUsers();\n            return true;\n          }\n        } catch (error) {\n          console.error('Error parsing user data:', error);\n        }\n      }\n      return false;\n    },\n    logout() {\n      this.currentUserId = null;\n      this.userIdInput = '';\n      localStorage.removeItem('adminUserId');\n      this.users = [];\n    },\n    async fetchUsers() {\n      this.loading = true;\n      this.errorMessage = '';\n      this.successMessage = '';\n      try {\n        const response = await axios.get('/admin/users', {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        this.users = response.data.users;\n      } catch (error) {\n        if (error.response?.status === 403) {\n          this.errorMessage = 'Access denied. Admin privileges required.';\n          this.logout();\n        } else {\n          this.errorMessage = 'Error fetching users. Please try again.';\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    startEditUsername(user) {\n      this.editingUserId = user._id;\n      this.editUsernameValue = user.username;\n    },\n    cancelEdit() {\n      this.editingUserId = null;\n      this.editUsernameValue = '';\n    },\n    async saveUsername(userId) {\n      if (!this.editUsernameValue.trim() || this.editUsernameValue.trim().length < 3) {\n        this.errorMessage = 'Username must be at least 3 characters';\n        return;\n      }\n      try {\n        await axios.patch(`/admin/users/${userId}/username`, {\n          username: this.editUsernameValue.trim()\n        }, {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        this.successMessage = 'Username updated successfully';\n        this.cancelEdit();\n        await this.fetchUsers();\n        setTimeout(() => {\n          this.successMessage = '';\n        }, 3000);\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Error updating username';\n        setTimeout(() => {\n          this.errorMessage = '';\n        }, 3000);\n      }\n    },\n    confirmDelete(user) {\n      this.userToDelete = user;\n    },\n    cancelDelete() {\n      this.userToDelete = null;\n    },\n    async deleteUser() {\n      if (!this.userToDelete) return;\n      try {\n        await axios.delete(`/admin/users/${this.userToDelete._id}`, {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        this.successMessage = 'User deleted successfully';\n        this.userToDelete = null;\n        await this.fetchUsers();\n        setTimeout(() => {\n          this.successMessage = '';\n        }, 3000);\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Error deleting user';\n        this.userToDelete = null;\n        setTimeout(() => {\n          this.errorMessage = '';\n        }, 3000);\n      }\n    },\n    async toggleAdmin(user) {\n      try {\n        await axios.patch(`/admin/users/${user._id}/admin`, {\n          isAdmin: !user.isAdmin\n        }, {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        this.successMessage = `User ${!user.isAdmin ? 'promoted to' : 'removed from'} admin`;\n        await this.fetchUsers();\n        setTimeout(() => {\n          this.successMessage = '';\n        }, 3000);\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Error updating admin status';\n        setTimeout(() => {\n          this.errorMessage = '';\n        }, 3000);\n      }\n    },\n    formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      const date = new Date(dateString);\n      return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","userIdInput","currentUserId","users","loading","editingUserId","editUsernameValue","userToDelete","successMessage","errorMessage","authError","mounted","checkLoggedInUser","storedUserId","localStorage","getItem","fetchUsers","methods","authenticate","trim","get","params","userId","setItem","error","response","status","userStr","user","JSON","parse","isAdmin","id","console","logout","removeItem","startEditUsername","_id","username","cancelEdit","saveUsername","length","patch","setTimeout","message","confirmDelete","cancelDelete","deleteUser","delete","toggleAdmin","formatDate","dateString","date","Date","toLocaleDateString","toLocaleTimeString","hour","minute"],"sources":["C:\\Users\\compu\\Desktop\\Flashflashy\\frontend\\src\\views\\AdminPanel.vue"],"sourcesContent":["<template>\n  <div class=\"admin-panel\">\n    <div class=\"admin-container\">\n      <h1>Admin Panel</h1>\n      \n      <!-- Admin Authentication -->\n      <div v-if=\"!currentUserId\" class=\"auth-section\">\n        <h2>Admin Access Required</h2>\n        <p class=\"help-text\">You must be logged in as an admin to access this panel.</p>\n        <div class=\"auth-form\">\n          <input\n            v-model=\"userIdInput\"\n            type=\"text\"\n            placeholder=\"Enter your user ID (if not logged in)\"\n            class=\"user-id-input\"\n          />\n          <button @click=\"authenticate\" class=\"auth-btn\">Access Panel</button>\n        </div>\n        <div v-if=\"authError\" class=\"error-message\">{{ authError }}</div>\n        <div class=\"login-prompt\">\n          <p>Not logged in? <router-link to=\"/login\">Login here</router-link></p>\n        </div>\n      </div>\n\n      <!-- Admin Panel Content -->\n      <div v-else>\n        <div class=\"panel-header\">\n          <p class=\"welcome-text\">Welcome, Admin! Managing users as: {{ currentUserId }}</p>\n          <button @click=\"logout\" class=\"logout-btn\">Logout</button>\n        </div>\n\n        <!-- Loading State -->\n        <div v-if=\"loading\" class=\"loading\">Loading users...</div>\n\n        <!-- Users Table -->\n        <div v-else class=\"users-table-container\">\n          <div class=\"table-header\">\n            <h2>All Users ({{ users.length }})</h2>\n            <button @click=\"fetchUsers\" class=\"refresh-btn\">Refresh</button>\n          </div>\n\n          <table class=\"users-table\">\n            <thead>\n              <tr>\n                <th>Username</th>\n                <th>Email</th>\n                <th>Admin</th>\n                <th>Created</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"user in users\" :key=\"user._id\" :class=\"{ 'admin-row': user.isAdmin }\">\n                <td>\n                  <div v-if=\"editingUserId === user._id\" class=\"edit-username\">\n                    <input\n                      v-model=\"editUsernameValue\"\n                      type=\"text\"\n                      class=\"username-input\"\n                      @keyup.enter=\"saveUsername(user._id)\"\n                      @keyup.esc=\"cancelEdit\"\n                    />\n                    <button @click=\"saveUsername(user._id)\" class=\"save-btn\">Save</button>\n                    <button @click=\"cancelEdit\" class=\"cancel-btn\">Cancel</button>\n                  </div>\n                  <span v-else>{{ user.username }}</span>\n                </td>\n                <td>{{ user.email }}</td>\n                <td>\n                  <span v-if=\"user.isAdmin\" class=\"admin-badge\">Admin</span>\n                  <span v-else class=\"user-badge\">User</span>\n                </td>\n                <td>{{ formatDate(user.createdAt) }}</td>\n                <td class=\"actions-cell\">\n                  <button\n                    v-if=\"editingUserId !== user._id\"\n                    @click=\"startEditUsername(user)\"\n                    class=\"action-btn edit-btn\"\n                  >\n                    Edit Username\n                  </button>\n                  <button\n                    v-if=\"user._id !== currentUserId\"\n                    @click=\"confirmDelete(user)\"\n                    class=\"action-btn delete-btn\"\n                  >\n                    Delete\n                  </button>\n                  <button\n                    v-if=\"user._id !== currentUserId\"\n                    @click=\"toggleAdmin(user)\"\n                    class=\"action-btn admin-toggle-btn\"\n                  >\n                    {{ user.isAdmin ? 'Remove Admin' : 'Make Admin' }}\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n        <!-- Success/Error Messages -->\n        <div v-if=\"successMessage\" class=\"success-message\">{{ successMessage }}</div>\n        <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\n      </div>\n    </div>\n\n    <!-- Delete Confirmation Modal -->\n    <div v-if=\"userToDelete\" class=\"modal-overlay\" @click=\"cancelDelete\">\n      <div class=\"modal\" @click.stop>\n        <h3>Confirm Delete</h3>\n        <p>Are you sure you want to delete user <strong>{{ userToDelete.username }}</strong>?</p>\n        <p class=\"warning\">This will permanently delete the user and all their decks and cards.</p>\n        <div class=\"modal-actions\">\n          <button @click=\"deleteUser\" class=\"confirm-delete-btn\">Delete</button>\n          <button @click=\"cancelDelete\" class=\"cancel-btn\">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'AdminPanel',\n  data() {\n    return {\n      userIdInput: '',\n      currentUserId: null,\n      users: [],\n      loading: false,\n      editingUserId: null,\n      editUsernameValue: '',\n      userToDelete: null,\n      successMessage: '',\n      errorMessage: '',\n      authError: '',\n    };\n  },\n  mounted() {\n    // First try to use logged-in user if they're admin\n    if (!this.checkLoggedInUser()) {\n      // Fallback to adminUserId if available (for backward compatibility)\n      const storedUserId = localStorage.getItem('adminUserId');\n      if (storedUserId) {\n        this.currentUserId = storedUserId;\n        this.fetchUsers();\n      }\n    }\n  },\n  methods: {\n    async authenticate() {\n      if (!this.userIdInput.trim()) {\n        this.authError = 'Please enter a user ID';\n        return;\n      }\n\n      try {\n        // Try to fetch users to verify admin status\n        await axios.get('/admin/users', {\n          params: { userId: this.userIdInput.trim() },\n        });\n\n        this.currentUserId = this.userIdInput.trim();\n        localStorage.setItem('adminUserId', this.currentUserId);\n        this.authError = '';\n        this.fetchUsers();\n      } catch (error) {\n        if (error.response?.status === 403) {\n          this.authError = 'Access denied. You must be an admin.';\n        } else if (error.response?.status === 404) {\n          this.authError = 'User not found.';\n        } else {\n          this.authError = 'Error authenticating. Please check your user ID.';\n        }\n      }\n    },\n    checkLoggedInUser() {\n      // Check if user is logged in and is admin\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        try {\n          const user = JSON.parse(userStr);\n          if (user.isAdmin && user.id) {\n            this.currentUserId = user.id;\n            this.fetchUsers();\n            return true;\n          }\n        } catch (error) {\n          console.error('Error parsing user data:', error);\n        }\n      }\n      return false;\n    },\n    logout() {\n      this.currentUserId = null;\n      this.userIdInput = '';\n      localStorage.removeItem('adminUserId');\n      this.users = [];\n    },\n    async fetchUsers() {\n      this.loading = true;\n      this.errorMessage = '';\n      this.successMessage = '';\n\n      try {\n        const response = await axios.get('/admin/users', {\n          params: { userId: this.currentUserId },\n        });\n        this.users = response.data.users;\n      } catch (error) {\n        if (error.response?.status === 403) {\n          this.errorMessage = 'Access denied. Admin privileges required.';\n          this.logout();\n        } else {\n          this.errorMessage = 'Error fetching users. Please try again.';\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    startEditUsername(user) {\n      this.editingUserId = user._id;\n      this.editUsernameValue = user.username;\n    },\n    cancelEdit() {\n      this.editingUserId = null;\n      this.editUsernameValue = '';\n    },\n    async saveUsername(userId) {\n      if (!this.editUsernameValue.trim() || this.editUsernameValue.trim().length < 3) {\n        this.errorMessage = 'Username must be at least 3 characters';\n        return;\n      }\n\n      try {\n        await axios.patch(\n          `/admin/users/${userId}/username`,\n          { username: this.editUsernameValue.trim() },\n          { params: { userId: this.currentUserId } }\n        );\n\n        this.successMessage = 'Username updated successfully';\n        this.cancelEdit();\n        await this.fetchUsers();\n        setTimeout(() => {\n          this.successMessage = '';\n        }, 3000);\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Error updating username';\n        setTimeout(() => {\n          this.errorMessage = '';\n        }, 3000);\n      }\n    },\n    confirmDelete(user) {\n      this.userToDelete = user;\n    },\n    cancelDelete() {\n      this.userToDelete = null;\n    },\n    async deleteUser() {\n      if (!this.userToDelete) return;\n\n      try {\n        await axios.delete(`/admin/users/${this.userToDelete._id}`, {\n          params: { userId: this.currentUserId },\n        });\n\n        this.successMessage = 'User deleted successfully';\n        this.userToDelete = null;\n        await this.fetchUsers();\n        setTimeout(() => {\n          this.successMessage = '';\n        }, 3000);\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Error deleting user';\n        this.userToDelete = null;\n        setTimeout(() => {\n          this.errorMessage = '';\n        }, 3000);\n      }\n    },\n    async toggleAdmin(user) {\n      try {\n        await axios.patch(\n          `/admin/users/${user._id}/admin`,\n          { isAdmin: !user.isAdmin },\n          { params: { userId: this.currentUserId } }\n        );\n\n        this.successMessage = `User ${!user.isAdmin ? 'promoted to' : 'removed from'} admin`;\n        await this.fetchUsers();\n        setTimeout(() => {\n          this.successMessage = '';\n        }, 3000);\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Error updating admin status';\n        setTimeout(() => {\n          this.errorMessage = '';\n        }, 3000);\n      }\n    },\n    formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      const date = new Date(dateString);\n      return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.admin-panel {\n  padding: 20px;\n  min-height: calc(100vh - 200px);\n}\n\n.admin-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  padding: 30px;\n}\n\nh1 {\n  color: #2c3e50;\n  margin-bottom: 20px;\n}\n\n.auth-section {\n  text-align: center;\n  padding: 40px 20px;\n}\n\n.auth-section h2 {\n  margin-bottom: 10px;\n}\n\n.help-text {\n  color: #666;\n  margin-bottom: 20px;\n}\n\n.auth-form {\n  display: flex;\n  gap: 10px;\n  max-width: 400px;\n  margin: 0 auto;\n}\n\n.user-id-input {\n  flex: 1;\n  padding: 12px;\n  border: 2px solid #e0e0e0;\n  border-radius: 4px;\n  font-size: 16px;\n}\n\n.auth-btn,\n.logout-btn,\n.refresh-btn {\n  padding: 12px 24px;\n  background-color: #42b983;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.auth-btn:hover,\n.refresh-btn:hover {\n  background-color: #35a372;\n}\n\n.logout-btn {\n  background-color: #e74c3c;\n}\n\n.logout-btn:hover {\n  background-color: #c0392b;\n}\n\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 2px solid #e0e0e0;\n}\n\n.welcome-text {\n  color: #666;\n  font-weight: 500;\n}\n\n.loading {\n  text-align: center;\n  padding: 40px;\n  color: #666;\n}\n\n.table-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.table-header h2 {\n  margin: 0;\n  color: #2c3e50;\n}\n\n.users-table-container {\n  overflow-x: auto;\n}\n\n.users-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 10px;\n}\n\n.users-table th {\n  background-color: #f5f5f5;\n  padding: 12px;\n  text-align: left;\n  font-weight: 600;\n  color: #2c3e50;\n  border-bottom: 2px solid #e0e0e0;\n}\n\n.users-table td {\n  padding: 12px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.users-table tr:hover {\n  background-color: #f9f9f9;\n}\n\n.admin-row {\n  background-color: #fff9e6;\n}\n\n.admin-badge {\n  display: inline-block;\n  padding: 4px 8px;\n  background-color: #f39c12;\n  color: white;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.user-badge {\n  display: inline-block;\n  padding: 4px 8px;\n  background-color: #95a5a6;\n  color: white;\n  border-radius: 4px;\n  font-size: 12px;\n}\n\n.actions-cell {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.action-btn {\n  padding: 6px 12px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.edit-btn {\n  background-color: #3498db;\n  color: white;\n}\n\n.edit-btn:hover {\n  background-color: #2980b9;\n}\n\n.delete-btn {\n  background-color: #e74c3c;\n  color: white;\n}\n\n.delete-btn:hover {\n  background-color: #c0392b;\n}\n\n.admin-toggle-btn {\n  background-color: #9b59b6;\n  color: white;\n}\n\n.admin-toggle-btn:hover {\n  background-color: #8e44ad;\n}\n\n.edit-username {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.username-input {\n  padding: 6px;\n  border: 2px solid #3498db;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.save-btn {\n  padding: 6px 12px;\n  background-color: #42b983;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n.cancel-btn {\n  padding: 6px 12px;\n  background-color: #95a5a6;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n.success-message {\n  margin-top: 15px;\n  padding: 12px;\n  background-color: #d4edda;\n  color: #155724;\n  border-radius: 4px;\n  border: 1px solid #c3e6cb;\n}\n\n.error-message {\n  margin-top: 15px;\n  padding: 12px;\n  background-color: #f8d7da;\n  color: #721c24;\n  border-radius: 4px;\n  border: 1px solid #f5c6cb;\n}\n\n.login-prompt {\n  margin-top: 20px;\n  text-align: center;\n  color: #666;\n}\n\n.login-prompt a {\n  color: #42b983;\n  text-decoration: none;\n  font-weight: 500;\n}\n\n.login-prompt a:hover {\n  text-decoration: underline;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal {\n  background: white;\n  padding: 30px;\n  border-radius: 8px;\n  max-width: 400px;\n  width: 90%;\n}\n\n.modal h3 {\n  margin-top: 0;\n  color: #2c3e50;\n}\n\n.warning {\n  color: #e74c3c;\n  font-weight: 500;\n}\n\n.modal-actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 20px;\n  justify-content: flex-end;\n}\n\n.confirm-delete-btn {\n  padding: 10px 20px;\n  background-color: #e74c3c;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 600;\n}\n\n.confirm-delete-btn:hover {\n  background-color: #c0392b;\n}\n</style>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}